<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Finalizar Compra | FloreríasB</title>
  <link rel="stylesheet" href="styles.css">
  <link rel="icon" href="https://img.icons8.com/ios-filled/50/flower.png">
  <style>
    body {
      background: #fff6fa;
      min-height: 100vh;
      margin: 0;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
    }
    .checkout-main {
      max-width: 1100px;
      margin: 48px auto;
      background: #fff;
      border-radius: 16px;
      box-shadow: 0 4px 24px rgba(200,0,100,0.10);
      padding: 40px 24px;
      display: flex;
      flex-wrap: wrap;
      gap: 40px;
      justify-content: center;
      align-items: flex-start;
    }
    .checkout-title {
      width: 100%;
      text-align: center;
      font-size: 2.2em;
      color: #c06;
      font-weight: 700;
      margin-bottom: 32px;
      margin-top: 0;
      letter-spacing: 1px;
    }
    .checkout-form {
      flex: 2;
      min-width: 320px;
    }
    .checkout-summary {
      flex: 1;
      min-width: 280px;
      background: #fff6fa;
      border-radius: 12px;
      padding: 24px;
      box-shadow: 0 2px 8px rgba(200,0,100,0.05);
      font-size: 15px;
      height: fit-content;
    }
    .form-section {
      margin-bottom: 32px;
      border-bottom: 1px solid #ffe4ef;
      padding-bottom: 24px;
    }
    .form-section:last-child { border-bottom: none; }
    .form-section h3 {
      color: #c06;
      font-size: 1.2em;
      margin-bottom: 12px;
      font-weight: 700;
    }
    .form-row {
      display: flex;
      gap: 16px;
      margin-bottom: 14px;
      flex-wrap: wrap;
    }
    .form-row label {
      flex: 1;
      min-width: 120px;
      font-weight: 500;
      color: #333;
      margin-bottom: 4px;
      display: block;
    }
    .form-row input, .form-row select, .form-row textarea {
      width: 100%;
      padding: 7px 10px;
      border-radius: 6px;
      border: 1px solid #ccc;
      font-size: 1em;
      margin-bottom: 8px;
      box-sizing: border-box;
      font-family: inherit;
    }
    .form-row textarea { min-height: 60px; resize: vertical; }
    .form-row .small { max-width: 120px; }
    .form-row .medium { max-width: 220px; }
    .form-row .large { max-width: 320px; }
    .form-row .radio-group, .form-row .checkbox-group {
      display: flex;
      gap: 18px;
      align-items: center;
      margin-bottom: 8px;
    }
    .form-row .radio-group label, .form-row .checkbox-group label {
      font-weight: 400;
      margin-bottom: 0;
    }
    .form-row .radio-group input[type="radio"], .form-row .checkbox-group input[type="checkbox"] {
      margin-right: 6px;
    }
    .checkout-summary h4 {
      color: #c06;
      font-size: 1.1em;
      margin-bottom: 10px;
      font-weight: 700;
    }
    .summary-list { margin-bottom: 18px; }
    .summary-list li {
      display: flex;
      justify-content: space-between;
      margin-bottom: 6px;
      font-size: 1em;
    }
    .summary-total {
      font-weight: 700;
      color: #c06;
      font-size: 1.1em;
      margin-bottom: 10px;
      display: flex;
      justify-content: space-between;
    }
    .summary-shipping {
      color: #a04;
      font-size: 0.98em;
      margin-bottom: 6px;
      display: flex;
      justify-content: space-between;
    }
    .checkout-payment h4 {
      color: #c06;
      font-size: 1.1em;
      margin-bottom: 10px;
      font-weight: 700;
    }
    .payment-methods { margin-bottom: 18px; }
    .payment-methods label { display: block; margin-bottom: 8px; }
    .payment-fields { margin-bottom: 18px; }
    .checkout-confirm {
      margin-top: 18px;
      margin-bottom: 18px;
    }
    .checkout-confirm label {
      font-size: 1em;
      color: #333;
      font-weight: 500;
      display: flex;
      align-items: center;
      gap: 8px;
    }
    .checkout-btn {
      width: 100%;
      background: #c06;
      color: #fff;
      border: none;
      border-radius: 6px;
      padding: 14px 0;
      font-size: 1.2em;
      font-weight: 700;
      cursor: pointer;
      margin-top: 10px;
      transition: background 0.2s;
    }
    .checkout-btn:hover { background: #a04; }
    .checkout-info {
      background: #ffe4ef;
      color: #333;
      border-radius: 8px;
      padding: 12px 18px;
      font-size: 0.98em;
      margin-bottom: 18px;
    }
    @media (max-width: 900px) {
      .checkout-main { flex-direction: column; gap: 0; padding: 16px; }
      .checkout-form, .checkout-summary { min-width: 0; }
      .checkout-title { font-size: 1.5em; margin-bottom: 18px; }
    }
    /* Estilos adicionales para métodos de pago */
    .payment-methods {
      display: flex;
      flex-direction: column;
      gap: 16px;
    }
    /* Métodos de pago bonitos */
    .payment-cards {
      display: flex;
      gap: 18px;
      flex-wrap: wrap;
    }
    .pay-card {
      background: #fff6fa;
      border: 2px solid #ffe4ef;
      border-radius: 12px;
      padding: 18px 18px 12px 18px;
      display: flex;
      flex-direction: column;
      align-items: flex-start;
      min-width: 180px;
      cursor: pointer;
      position: relative;
      transition: border 0.2s, box-shadow 0.2s;
      box-shadow: 0 2px 8px rgba(200,0,100,0.04);
      font-size: 1em;
    }
    .pay-card input[type="radio"] {
      position: absolute;
      top: 14px;
      left: 14px;
      accent-color: #c06;
      transform: scale(1.2);
    }
    .pay-card .pay-icon {
      margin-left: 32px;
      margin-bottom: 6px;
      display: flex;
      gap: 6px;
    }
    .pay-card .pay-title {
      font-weight: 700;
      color: #c06;
      font-size: 1.08em;
      margin-bottom: 2px;
      margin-left: 32px;
    }
    .pay-card .pay-desc {
      font-size: 0.98em;
      color: #a04;
      margin-left: 32px;
    }
    .pay-card:hover, .pay-card input[type="radio"]:checked + .pay-icon {
      border-color: #c06;
      box-shadow: 0 4px 16px rgba(200,0,100,0.10);
    }
    .pay-card input[type="radio"]:checked ~ .pay-title {
      color: #a04;
    }
    .yape-card .pay-icon img { height: 32px; }
    .tarjeta-card .pay-icon img { height: 28px; }
    @media (max-width: 600px) {
      .payment-cards { flex-direction: column; gap: 10px; }
      .pay-card { min-width: 0; width: 100%; }
    }
    /* Estilos específicos para Yape */
    .yape-box {
      background: #f7faff;
      border-radius: 12px;
      padding: 18px 18px 12px 18px;
      margin-bottom: 12px;
      box-shadow: 0 2px 8px rgba(0,80,200,0.07);
      border: 1.5px solid #e3e8ff;
    }
    .yape-title {
      font-size: 1.15em;
      font-weight: 700;
      color: #1a4ed8;
      margin-bottom: 4px;
    }
    .yape-desc {
      font-size: 0.98em;
      color: #333;
      margin-bottom: 12px;
    }
    .yape-label {
      font-weight: 500;
      color: #1a4ed8;
      margin-bottom: 4px;
      display: block;
    }
    .yape-input {
      width: 100%;
      padding: 8px 12px;
      border-radius: 7px;
      border: 1.5px solid #bcd2ff;
      font-size: 1.08em;
      background: #eaf2ff;
      margin-bottom: 8px;
      box-sizing: border-box;
    }
    .yape-codigo-group {
      display: flex;
      gap: 8px;
      margin-bottom: 10px;
      margin-top: 4px;
    }
    .yape-codigo {
      width: 38px;
      height: 38px;
      text-align: center;
      font-size: 1.25em;
      border-radius: 7px;
      border: 1.5px solid #bcd2ff;
      background: #fff;
      outline: none;
      transition: border 0.2s;
    }
    .yape-codigo:focus {
      border-color: #1a4ed8;
      background: #eaf2ff;
    }
    .yape-info {
      background: #eaf2ff;
      color: #1a4ed8;
      border-radius: 8px;
      padding: 10px 14px;
      font-size: 0.98em;
      margin-top: 8px;
      display: flex;
      align-items: center;
      gap: 8px;
    }
    .yape-icon {
      font-size: 1.2em;
    }
    /* Estilos para el método de pago con tarjeta */
    .tarjeta-box {
      background: #f7faff;
      border-radius: 12px;
      padding: 18px 18px 12px 18px;
      margin-bottom: 12px;
      box-shadow: 0 2px 8px rgba(0,80,200,0.07);
      border: 1.5px solid #e3e8ff;
    }
    .tarjeta-title {
      font-size: 1.15em;
      font-weight: 700;
      color: #1a4ed8;
      margin-bottom: 4px;
    }
    .tarjeta-desc {
      font-size: 0.98em;
      color: #333;
      margin-bottom: 12px;
    }
    .tarjeta-label {
      font-weight: 500;
      color: #1a4ed8;
      margin-bottom: 4px;
      display: block;
    }
    .tarjeta-input {
      width: 100%;
      padding: 8px 12px;
      border-radius: 7px;
      border: 1.5px solid #bcd2ff;
      font-size: 1.08em;
      background: #eaf2ff;
      margin-bottom: 8px;
      box-sizing: border-box;
    }
    .tarjeta-row {
      display: flex;
      gap: 16px;
    }
    .tarjeta-row > div { flex: 1; }
    .tarjeta-info {
      background: #eaf2ff;
      color: #1a4ed8;
      border-radius: 8px;
      padding: 10px 14px;
      font-size: 0.98em;
      margin-top: 8px;
      display: flex;
      align-items: center;
      gap: 8px;
    }
    .tarjeta-icon {
      font-size: 1.2em;
    }
  </style>
</head>
<body>
  <main class="checkout-main">
    <h1 class="checkout-title">Finalizar Compra</h1>
    <!-- Formulario de Checkout -->
    <form class="checkout-form" id="checkoutForm" method="POST" action="https://formspree.io/f/mnnzokbo">
      <!-- Detalles de Facturación -->
      <div class="form-section">
        <h3>Detalles de Facturación</h3>
        <div class="form-row">
          <label for="email">Correo electrónico *</label>
          <input type="email" id="email" name="email" required>
        </div>
        <div class="form-row">
          <label for="pais">País *</label>
          <select id="pais" name="pais" required>
            <option value="Perú" selected>Perú</option>
          </select>
        </div>
        <div class="form-row">
          <label for="nombres">Nombres *</label>
          <input type="text" id="nombres" name="nombres" required>
          <label for="apellidos">Apellidos *</label>
          <input type="text" id="apellidos" name="apellidos" required>
        </div>
        <div class="form-row">
          <label for="docTipo">Documento de Identidad</label>
          <select id="docTipo" name="docTipo">
            <option value="">Tipo</option>
            <option value="DNI">DNI</option>
            <option value="CE">Carnet de Extranjería</option>
            <option value="Pasaporte">Pasaporte</option>
          </select>
          <input type="text" id="docNum" name="docNum" placeholder="Número">
        </div>
        <div class="form-row">
          <label for="tel">Teléfono *</label>
          <input type="tel" id="tel" name="tel" required pattern="[0-9]{7,15}">
        </div>
        <div class="form-row">
          <label for="ciudad">Ciudad *</label>
          <input type="text" id="ciudad" name="ciudad" required>
        </div>
        <div class="form-row">
          <label for="direccion">Dirección *</label>
          <input type="text" id="direccion" name="direccion" required>
        </div>
      </div>
      <!-- Detalles de Envío -->
      <div class="form-section">
        <h3>Detalles de Envío</h3>
        <div class="form-row">
          <label>Tipo de envío *</label>
          <div class="radio-group">
            <label><input type="radio" name="envioTipo" value="Delivery" checked required> Delivery</label>
            <label><input type="radio" name="envioTipo" value="Retiro"> Retiro en tienda</label>
          </div>
        </div>
        <div class="form-row">
          <label for="envNombres">Nombres *</label>
          <input type="text" id="envNombres" name="envNombres" required>
          <label for="envApellidos">Apellidos *</label>
          <input type="text" id="envApellidos" name="envApellidos" required>
        </div>
        <div class="form-row">
          <label for="envTel">Teléfono *</label>
          <input type="tel" id="envTel" name="envTel" required pattern="[0-9]{7,15}">
        </div>
        <div class="form-row">
          <label for="envProvincia">Provincia *</label>
          <select id="envProvincia" name="envProvincia" required>
            <option value="Cajabamba">Cajabamba</option>
            <option value="Cajamarca">Cajamarca</option>
            <option value="Celendín">Celendín</option>
            <option value="Chota">Chota</option>
            <option value="Contumaza">Contumaza</option>
            <option value="Cutervo">Cutervo</option>
            <option value="Hualgayoc">Hualgayoc</option>
            <option value="Jaén">Jaén</option>
            <option value="San Ignacio">San Ignacio</option>
            <option value="San Marcos">San Marcos</option>
            <option value="San Miguel">San Miguel</option>
            <option value="San Pablo">San Pablo</option>
            <option value="Santa Cruz">Santa Cruz</option>
          </select>
        </div>
        <div class="form-row">
          <label for="envDireccion">Dirección *</label>
          <input type="text" id="envDireccion" name="envDireccion" required>
        </div>
        <div class="form-row">
          <label for="envTipoDir">Tipo de dirección *</label>
          <select id="envTipoDir" name="envTipoDir" required>
            <option value="Casa">Casa</option>
            <option value="Residencia">Residencia</option>
          </select>
        </div>
        <div class="form-row">
          <label for="envReferencia">Referencia</label>
          <input type="text" id="envReferencia" name="envReferencia">
        </div>
        <div class="form-row">
          <label for="envFecha">Fecha de entrega *</label>
          <input type="date" id="envFecha" name="envFecha" required>
        </div>
        <div class="form-row">
          <label for="envHorario">Horario de entrega</label>
          <select id="envHorario" name="envHorario">
            <option value="">Selecciona un rango</option>
            <option value="8am-12pm">8am - 12pm</option>
            <option value="12pm-4pm">12pm - 4pm</option>
            <option value="4pm-8pm">4pm - 8pm</option>
          </select>
        </div>
      </div>
      <!-- Dedicatoria -->
      <div class="form-section">
        <h3>Dedicatoria</h3>
        <div class="form-row">
          <label for="motivo">Motivo/Ocasión *</label>
          <select id="motivo" name="motivo" required>
            <option value="Romance">Romance</option>
            <option value="Cumpleaños">Cumpleaños</option>
            <option value="Aniversario">Aniversario</option>
            <option value="Condolencias">Condolencias</option>
            <option value="Graduación">Graduación</option>
            <option value="Otro">Otro</option>
          </select>
        </div>
        <div class="form-row">
          <label for="dedicatoria">Mensaje de dedicatoria (máx. 500 caracteres)</label>
          <textarea id="dedicatoria" name="dedicatoria" maxlength="500"></textarea>
        </div>
        <div class="form-row">
          <label for="comentarios">Comentarios (opcional)</label>
          <textarea id="comentarios" name="comentarios" maxlength="300"></textarea>
        </div>
      </div>
      <!-- Info horarios y contacto -->
      <div class="checkout-info">
        <strong>Horarios de delivery:</strong> Lunes a sábado de 8am a 8pm. <br>
        <strong>Teléfonos de contacto:</strong> 01-2345678 / WhatsApp 999-888-777.<br>
        Si tienes problemas con el pago, comunícate con nosotros.
      </div>
      <!-- Métodos de Pago -->
      <div class="form-section checkout-payment">
        <h3>Métodos de Pago</h3>
        <div class="yape-box">
          <div class="yape-title">Paga con Yape en pocos segundos</div>
          <div class="yape-desc">Realiza el pago a <b>Yape número 952408803</b> y completa los siguientes datos para confirmar tu compra.</div>
          <label for="yapeNombre" class="yape-label">Nombre</label>
          <input type="text" id="yapeNombre" name="yapeNombre" class="yape-input" required placeholder="Tu nombre">
          <label for="yapeCel" class="yape-label">Número de celular</label>
          <input type="tel" id="yapeCel" name="yapeCel" class="yape-input" required pattern="[0-9]{9}" placeholder="Tu número Yape">
        </div>
      </div>
      <!-- Confirmación y Términos -->
      <div class="checkout-confirm">
        <label>
          <input type="checkbox" id="terminos" required>
          He leído y acepto los <a href="#" target="_blank">términos y condiciones</a> y las <a href="#" target="_blank">políticas de despacho</a>.
        </label>
      </div>
      <button type="submit" class="checkout-btn">Realizar pedido</button>
    </form>
    <!-- Resumen del Pedido -->
    <aside class="checkout-summary">
      <h4>Resumen del Pedido</h4>
      <ul class="summary-list" id="summaryList"></ul>
      <div class="summary-shipping">
        <span>Envío:</span>
        <span id="summaryShipping">S/ 0.00</span>
      </div>
      <div class="summary-total">
        <span>Total:</span>
        <span id="summaryTotal">S/ 0.00</span>
      </div>
    </aside>
  </main>

  <!-- Pie de página -->
  <footer class="footer">
    <div class="footer-links">
      <a href="#">Blog</a>
      <a href="#">Contacto</a>
      <a href="#">Nosotros</a>
    </div>
    <div class="footer-social">
      <a href="#"><img src="https://img.icons8.com/ios-filled/24/facebook-new.png" alt="Facebook"></a>
      <a href="#"><img src="https://img.icons8.com/ios-filled/24/instagram-new.png" alt="Instagram"></a>
      <a href="#"><img src="https://img.icons8.com/ios-filled/24/youtube-play.png" alt="YouTube"></a>
    </div>
    <div class="footer-payments">
      <span>Medios de pago:</span>
      <img src="https://upload.wikimedia.org/wikipedia/commons/2/2a/Yape_logo.png" alt="Yape" class="pay-icon">
      <img src="https://upload.wikimedia.org/wikipedia/commons/2/2e/Logo_Plin.png" alt="Plin" class="pay-icon">
      <img src="https://img.icons8.com/ios-filled/24/visa.png" alt="Visa" class="pay-icon">
      <img src="https://img.icons8.com/ios-filled/24/mastercard.png" alt="Mastercard" class="pay-icon">
    </div>
    <div class="footer-legal">
      <small>© 2025 FloreríasB. Desarrollado por Equipo Dev. Todos los derechos reservados.</small>
    </div>
  </footer>

  <script>
    // --- Resumen del pedido desde localStorage ---
    let cart = JSON.parse(localStorage.getItem('cart') || '[]');
    function renderSummary() {
      const summaryList = document.getElementById('summaryList');
      const summaryShipping = document.getElementById('summaryShipping');
      const summaryTotal = document.getElementById('summaryTotal');
      summaryList.innerHTML = '';
      let subtotal = 0;
      cart.forEach(item => {
        subtotal += item.price * item.qty;
        let li = document.createElement('li');
        li.innerHTML = `<span>${item.name} x${item.qty}</span><span>S/ ${(item.price * item.qty).toFixed(2)}</span>`;
        summaryList.appendChild(li);
      });
      // Costo de envío según distrito
      let envio = 15;
      const distritoSel = document.getElementById('envDistrito');
      if (distritoSel) {
        const selected = distritoSel.options[distritoSel.selectedIndex];
        envio = parseFloat(selected.getAttribute('data-envio')) || 15;
      }
      summaryShipping.textContent = `S/ ${envio.toFixed(2)}`;
      summaryTotal.textContent = `S/ ${(subtotal + envio).toFixed(2)}`;
    }
    document.getElementById('envDistrito').addEventListener('change', renderSummary);
    renderSummary();

    // --- Métodos de pago dinámicos ---
    const paymentFields = document.getElementById('paymentFields');
    document.querySelectorAll('input[name="pagoMetodo"]').forEach(radio => {
      radio.addEventListener('change', function() {
        let html = '';
        if (this.value === 'Yape') {
          html = `
            <div class="yape-box">
              <div class="yape-title">Paga con Yape en pocos segundos</div>
              <div class="yape-desc">Realiza el pago a <b>Yape número 952408803</b> y completa los siguientes datos para confirmar tu compra.</div>
              <label for="yapeNombre" class="yape-label">Nombre</label>
              <input type="text" id="yapeNombre" name="yapeNombre" class="yape-input" required placeholder="Tu nombre">
              <label for="yapeCel" class="yape-label">Número de celular</label>
              <input type="tel" id="yapeCel" name="yapeCel" class="yape-input" required pattern="[0-9]{9}" placeholder="Tu número Yape">
            </div>
          `;
        }
        paymentFields.innerHTML = html;
      });
    });
    // Dispara el evento al cargar la página para mostrar los campos de Yape
    document.addEventListener('DOMContentLoaded', function() {
      const yapeRadio = document.querySelector('input[name="pagoMetodo"][value="Yape"]');
      if (yapeRadio) yapeRadio.dispatchEvent(new Event('change'));
    });

    // --- Validación y envío del formulario ---
    document.getElementById('checkoutForm').addEventListener('submit', function(e){
      e.preventDefault();
      // Validaciones básicas
      let email = this.email.value.trim();
      let tel = this.tel.value.trim();
      let envTel = this.envTel.value.trim();
      let dedicatoria = this.dedicatoria.value.trim();
      let comentarios = this.comentarios.value.trim();
      if (!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email)) {
        alert('Ingrese un correo electrónico válido.');
        this.email.focus(); return;
      }
      if (!/^[0-9]{7,15}$/.test(tel)) {
        alert('Ingrese un teléfono válido.'); this.tel.focus(); return;
      }
      if (!/^[0-9]{7,15}$/.test(envTel)) {
        alert('Ingrese un teléfono de envío válido.'); this.envTel.focus(); return;
      }
      if (dedicatoria.length > 500) {
        alert('La dedicatoria no puede superar 500 caracteres.'); this.dedicatoria.focus(); return;
      }
      if (comentarios.length > 300) {
        alert('Los comentarios no pueden superar 300 caracteres.'); this.comentarios.focus(); return;
      }
      if (!this.terminos.checked) {
        alert('Debe aceptar los términos y condiciones.'); return;
      }

      // --- Armar mensaje para WhatsApp ---
      let pagoMetodo = document.querySelector('input[name="pagoMetodo"]:checked')?.value || '';
      let pagoDetalle = '';
      if (pagoMetodo === 'Yape') {
        let yapeNombre = document.getElementById('yapeNombre')?.value || '';
        let yapeCel = document.getElementById('yapeCel')?.value || '';
        pagoDetalle = `Yape\nNombre: ${yapeNombre}\nCelular: ${yapeCel}`;
      } else if (pagoMetodo === 'Tarjeta') {
        let tarjetaNum = document.getElementById('tarjetaNum')?.value || '';
        let tarjetaNombre = document.getElementById('tarjetaNombre')?.value || '';
        let tarjetaVenc = document.getElementById('tarjetaVenc')?.value || '';
        let tarjetaCVV = document.getElementById('tarjetaCVV')?.value || '';
        pagoDetalle = `Tarjeta\nNúmero: ${tarjetaNum}\nNombre: ${tarjetaNombre}\nVencimiento: ${tarjetaVenc}\nCVV: ${tarjetaCVV}`;
      }

      // Resumen de pedido
      let productos = [];
      let summaryList = document.querySelectorAll('#summaryList li');
      summaryList.forEach(li => productos.push(li.textContent.trim()));
      let envio = document.getElementById('summaryShipping').textContent;
      let total = document.getElementById('summaryTotal').textContent;

      // Mensaje final
      let mensaje = `Nuevo pedido desde la web:\n\n` +
        `--- Facturación ---\n` +
        `Email: ${email}\nNombre: ${this.nombres.value} ${this.apellidos.value}\nTeléfono: ${tel}\nPaís: ${this.pais.value}\nCiudad: ${this.ciudad.value}\nDirección: ${this.direccion.value}\nComprobante: ${this.comprobante.value}\n` +
        `--- Envío ---\n` +
        `Tipo: ${this.envioTipo.value}\nNombre: ${this.envNombres.value} ${this.envApellidos.value}\nTeléfono: ${envTel}\nCiudad: ${this.envCiudad.value}\nDistrito: ${this.envDistrito.value}\nDirección: ${this.envDireccion.value}\nReferencia: ${this.envReferencia.value}\nFecha: ${this.envFecha.value}\nHorario: ${this.envHorario.value}\n` +
        `--- Dedicatoria ---\n` +
        `Motivo: ${this.motivo.value}\nMensaje: ${dedicatoria}\nComentarios: ${comentarios}\n` +
        `--- Método de pago ---\n${pagoDetalle}\n` +
        `--- Pedido ---\n${productos.join('\n')}\nEnvío: ${envio}\nTotal: ${total}`;

      // Reemplaza por tu número de WhatsApp (ejemplo: 51999988877)
      let numeroWhatsApp = "952408803";
      let url = `https://wa.me/${numeroWhatsApp}?text=${encodeURIComponent(mensaje)}`;
      window.open(url, '_blank');
    });

    // --- Actualizar resumen al cambiar distrito ---
    document.getElementById('envDistrito').addEventListener('change', renderSummary);
  </script>
</body>
</html>